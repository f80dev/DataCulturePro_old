<div class="mainform"
     style="text-align: center;">

  <app-hourglass [message]="message"></app-hourglass>

  <div *ngIf="showAddWork==0 && profil">
    <mat-accordion style="display: inline-block;width:98%;">
      <!--      Civilité -->
      <mat-expansion-panel class="app-panel">
        <mat-expansion-panel-header>
          <mat-panel-title>
            Civilité
          </mat-panel-title>
          <mat-panel-description class="app-mat-panel-description">
            Noms, adresse & coordonnées
          </mat-panel-description>
        </mat-expansion-panel-header>

        <img [src]="profil.photo"
             mat-card-avatar
             class="image-photo"
             style="width:100px;height: 100px;margin:15px;"
             (click)="change_photo()">
        <br>

        <mat-form-field appearance="fill" class="app-field" style="max-width: 150px;">
          <mat-label>Prénom</mat-label>
          <input matInput type="text" max="50" [(ngModel)]="profil.firstname">
        </mat-form-field>

        <mat-form-field appearance="fill" class="app-field" style="max-width: 150px;">
          <mat-label>Nom</mat-label>
          <input matInput type="text" max="50" [(ngModel)]="profil.lastname">
        </mat-form-field>

        <br>

        <mat-form-field appearance="fill" class="app-field">
          <mat-label>Mobile</mat-label>
          <input matInput type="text" max="50" [(ngModel)]="profil.mobile">
        </mat-form-field>

        <br>
        <br>

         <mat-form-field appearance="fill" class="app-field">
          <mat-label>Adresse</mat-label>
          <input matInput type="text"  [(ngModel)]="profil.address">
        </mat-form-field>
        <br>

        <mat-form-field appearance="fill" class="app-field" style="max-width: 80px">
          <mat-label>Code postal</mat-label>
          <input matInput type="text" max="5" [(ngModel)]="profil.cp">
        </mat-form-field>
        &nbsp;
        <mat-form-field appearance="fill" class="app-field" style="max-width: 220px">
          <mat-label>Ville</mat-label>
          <input matInput type="text" [(ngModel)]="profil.town">
        </mat-form-field>


        <mat-action-row>
          <button color="primary" class="icon-button" mat-button mat-icon-button mat-raised-button (click)="quit(true)">
            <mat-icon>save</mat-icon>
          </button>
        </mat-action-row>

      </mat-expansion-panel>

<!--      Réseau sociaux -->
       <mat-expansion-panel class="app-panel" style="text-align: left;">
        <mat-expansion-panel-header>
          <mat-panel-title>
            Réseaux sociaux
          </mat-panel-title>
        </mat-expansion-panel-header>

       <mat-form-field appearance="fill" class="app-field">
          <mat-label>facebook</mat-label>
          <input matInput type="text" max="50" [(ngModel)]="profil.facebook" (keypress)="mustSave=true">
        </mat-form-field><br>

         <mat-form-field appearance="fill" class="app-field">
          <mat-label>youtube</mat-label>
          <input matInput type="text" max="50" [(ngModel)]="profil.youtube" (keypress)="mustSave=true">
        </mat-form-field><br>

          <mat-form-field appearance="fill" class="app-field">
          <mat-label>vimeo</mat-label>
          <input matInput type="text" max="50" [(ngModel)]="profil.vimeo" (keypress)="mustSave=true">
        </mat-form-field><br>

         <mat-form-field appearance="fill" class="app-field">
          <mat-label>instagram</mat-label>
          <input matInput type="text" max="50" [(ngModel)]="profil.instagram" (keypress)="mustSave=true">
        </mat-form-field><br>

         <mat-form-field appearance="fill" class="app-field">
          <mat-label>telegram</mat-label>
          <input matInput type="text" max="50" [(ngModel)]="profil.telegram" (keypress)="mustSave=true">
        </mat-form-field><br>

          <mat-form-field appearance="fill" class="app-field" >
          <mat-label>twitter</mat-label>
          <input matInput type="text" max="50" [(ngModel)]="profil.twitter" (keypress)="mustSave=true">
        </mat-form-field><br>

          <mat-form-field appearance="fill" class="app-field">
          <mat-label>tiktok</mat-label>
          <input matInput type="text" max="50" [(ngModel)]="profil.tiktok"
                 placeholder="https://www.tiktok.com/@" (keypress)="mustSave=true">
        </mat-form-field><br>

          <mat-action-row>
             <button color="primary" class="icon-button"
                     [disabled]="!mustSave"
                     mat-button mat-icon-button mat-raised-button (click)="quit(true)">
            <mat-icon>save</mat-icon>
          </button>
          </mat-action-row>

      </mat-expansion-panel>


      <!--      Mentorat-->
      <mat-expansion-panel class="app-panel" style="text-align: left;">
        <mat-expansion-panel-header>
          <mat-panel-title>
            Tutorat
          </mat-panel-title>
          <mat-panel-description class="app-mat-panel-description">
            Assister les nouveaux élèves
          </mat-panel-description>
        </mat-expansion-panel-header>
        <mat-checkbox *ngIf="config.user?.user"
                      (change)="save_user({acceptSponsor:$event})"
                      [checked]="config.user?.acceptSponsor">
          Accepte d'être tuteur
        </mat-checkbox>
      </mat-expansion-panel>

<!--      Expérience -->
      <mat-expansion-panel class="app-panel" [expanded]="true">
        <mat-expansion-panel-header>
          <mat-panel-title>
            Vos expériences
          </mat-panel-title>
        </mat-expansion-panel-header>
        <table style="width: 100%">
          <tr *ngFor="let work of works" style="width:100%;text-align: left;">
            <td>-</td>
            <td style="line-height: 100%;">
              {{work.job}} sur
              <a [title]="work.source" href="./pows?filter={{work.pow?.title}}">"{{work.pow?.title}}"</a>
              <br>
              <div *ngIf="work.dtEnd">
                en {{work.dtEnd | date:'yyyy'}}
                <br>
              </div>

            </td>
             <td style="text-align: right;width:10%;">
              <mat-icon style="cursor: pointer;font-size: medium" (click)="del_work(work)">
                cancel
              </mat-icon>

               <mat-icon *ngIf="work.public" style="cursor: pointer;font-size: medium" (click)="_private(work)">
                visibility
                </mat-icon>
               <mat-icon *ngIf="!work.public" style="cursor: pointer;font-size: medium" (click)="_private(work)">
                visibility_off
                </mat-icon>
            </td>

          </tr>
        </table>

        <mat-action-row>
          <button class="app-button" mat-button mat-raised-button
                  (click)="reset_works()">
            <div class="bloc-bouton">Effacer les<br>expériences</div>
          </button>

          <button class="app-button" mat-button mat-raised-button
                  (click)="analyse()">
            <div class="bloc-bouton">Analyse<br>automatique</div>
          </button>

          <button class="app-button" mat-button mat-raised-button
                  color="primary"
                  (click)="add_pow()">
            <div class="bloc-bouton">Ajouter une<br>expérience</div>
          </button>
        </mat-action-row>


      </mat-expansion-panel>
    </mat-accordion>

    <br><br>
    <p style="font-size: small">
      Dernière mise a jour le {{profil.dtLastUpdate | date:"dd/MM/yy"}}
    </p>
  </div>


  <!--  -->
  <!--  <div *ngIf="showAddWork==1" style="text-align: left;">-->
  <!--    <hr>-->
  <!--    <h3>Sélectionner le film à ajouter</h3>-->
  <!--    <div  style="width: 92%;margin-left: 4%;">-->
  <!--      <mat-form-field>-->
  <!--        <mat-label>Filter</mat-label>-->
  <!--        <input matInput (keyup)="applyFilter($event)" -->
  <!--               placeholder="titre" #input>-->
  <!--      </mat-form-field>-->

  <!--      <table mat-table-->
  <!--             [dataSource]="dataSource"-->
  <!--             class="mat-elevation-z2"-->
  <!--             style="width: 100%;text-align: left;">-->

  <!--        &lt;!&ndash; Position Column &ndash;&gt;-->
  <!--        <ng-container matColumnDef="title">-->
  <!--          <th mat-header-cell *matHeaderCellDef>Titre</th>-->
  <!--          <td mat-cell *matCellDef="let element"> {{element?.title}} </td>-->
  <!--        </ng-container>-->

  <!--        <ng-container matColumnDef="dtStart">-->
  <!--          <th mat-header-cell *matHeaderCellDef>Réalisé le</th>-->
  <!--          <td mat-cell *matCellDef="let element"> {{element?.dtStart | date:"YYYY"}} </td>-->
  <!--        </ng-container>-->

  <!--        <ng-container matColumnDef="sel">-->
  <!--          <th mat-header-cell *matHeaderCellDef>Sélectionner</th>-->
  <!--          <td mat-cell *matCellDef="let element">-->
  <!--            <button class="icon-button"-->
  <!--                    mat-button mat-raised-button mat-icon-button-->
  <!--                    (click)="select(element)">-->
  <!--              <mat-icon>checkmark</mat-icon>-->
  <!--            </button>-->
  <!--          </td>-->
  <!--        </ng-container>-->

  <!--        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>-->
  <!--        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>-->

  <!--        &lt;!&ndash; Row shown when there is no matching data. &ndash;&gt;-->
  <!--        <tr class="mat-row" *matNoDataRow>-->
  <!--          <td class="mat-cell" colspan="4">Aucune donnée ne répond au filtre "{{input.value}}"</td>-->
  <!--        </tr>-->
  <!--      </table>-->

  <!--      <br>-->
  <!--      <button class="app-button" mat-button mat-raised-button-->
  <!--              (click)="add_pow()">-->
  <!--        Nouveau film-->
  <!--      </button>-->
  <!--    </div>-->
  <!--  </div>-->

  <div *ngIf="showAddWork==2" style="width:100%;text-align: center;">
    <hr>
    <h3>Ajouter le Projet "{{add_work.movie}}"</h3>
    <br>
    <br>

    <mat-wform-field class="app-field">
      <mat-label>Fonction</mat-label>
      <mat-select  [(ngModel)]="job">
        <mat-option *ngFor="let job of config.jobs" [value]="job.value">{{job.label}}</mat-option>
      </mat-select>
      <mat-hint>Sélectionner le poste que vous aviez sur le projet</mat-hint>
    </mat-wform-field>
    <br>

    <br>

    <mat-form-field appearance="fill" class="app-field" style="max-width: 200px">
      <mat-label>Date de début</mat-label>
      <input matInput [matDatepicker]="picker" [(ngModel)]="dtStart">
      <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
      <mat-datepicker #picker></mat-datepicker>
      <mat-hint>Premier jour de travail</mat-hint>
    </mat-form-field>

    <mat-form-field appearance="fill" class="app-field" style="max-width: 200px">
      <mat-label>Date de fin</mat-label>
      <input matInput [matDatepicker]="picker2" [(ngModel)]="dtEnd">
      <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
      <mat-datepicker #picker2></mat-datepicker>
      <mat-hint>Dernier jour de travail</mat-hint>
    </mat-form-field>
    <br><br>

    <mat-form-field appearance="fill" class="app-field" style="max-width: 200px">
      <mat-label>Heures travaillées</mat-label>
      <input matInput type="number" value="8" [(value)]="duration">
      <span matSuffix>Hrs</span>
      <mat-hint>Nombre d'heures de travail réalisé sur le projet <mat-icon>help</mat-icon></mat-hint>
    </mat-form-field>

    <mat-form-field appearance="fill" class="app-field" style="max-width: 200px">
      <mat-label>Revenu total</mat-label>
      <input matInput type="number" value="" [(value)]="earning">
      <span matSuffix>€</span>
      <mat-hint>
        Revenu brut pour toute la durée
        <mat-icon title="Donnée anonymisée uniquement utilisée sous forme de moyenne pour les statistiques">help</mat-icon>
      </mat-hint>
    </mat-form-field>
    <br><br>


    <mat-form-field appearance="fill" class="app-field" style="width:100%;">
      <mat-label>Commentaires</mat-label>
      <input matInput max="200" type="text"
             title="Détailler l'expérience, difficultés rencontrées, bénéfices"
             value="Décrire l'expérience" [(ngModel)]="comment">
    </mat-form-field>
    <br>

    <button class="app-button"
            mat-button mat-raised-button
            title="Ajouter ce projet à votre expérience"
            (click)="save_newwork()">
      Ajouter ce projet
    </button>

  </div>


</div>
